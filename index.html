<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Escape Road - Endless Police Chase</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Game Canvas -->
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
    </div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen">
        <div class="menu-content">
            <h1>ESCAPE ROAD</h1>
            <p class="tagline">Outrun the Police. Collect Money. Survive.</p>
            <div class="menu-buttons">
                <button class="btn btn-primary" id="startGameBtn">START GAME</button>
                <button class="btn btn-secondary" id="garageBtn">GARAGE</button>
                <button class="btn btn-secondary" id="howToPlayBtn">HOW TO PLAY</button>
            </div>
            <div class="stats-display">
                <div class="stat-item">
                    <span class="stat-label">üí∞ Total Money:</span>
                    <span class="stat-value" id="totalMoney">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">üèÜ Best Distance:</span>
                    <span class="stat-value" id="bestDistance">0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- How to Play Screen -->
    <div id="howToPlayScreen" class="screen hidden">
        <div class="menu-content">
            <h2>HOW TO PLAY</h2>
            <div class="instructions">
                <div class="instruction-item">
                    <h3>üéÆ CONTROLS</h3>
                    <p><strong>W / ‚Üë</strong> - Accelerate</p>
                    <p><strong>S / ‚Üì</strong> - Brake / Reverse</p>
                    <p><strong>A / ‚Üê</strong> - Turn Left</p>
                    <p><strong>D / ‚Üí</strong> - Turn Right</p>
                    <p><strong>SPACE</strong> - Handbrake / Drift</p>
                </div>
                <div class="instruction-item">
                    <h3>üéØ OBJECTIVE</h3>
                    <p>Escape from the police for as long as possible!</p>
                    <p>Collect üí∞ money to unlock new vehicles in the garage.</p>
                    <p>Avoid obstacles and don't let the police catch you!</p>
                </div>
                <div class="instruction-item">
                    <h3>‚ö†Ô∏è WARNING</h3>
                    <p>The longer you survive, the more police will chase you.</p>
                    <p>Crashing into obstacles or police will end your run!</p>
                </div>
            </div>
            <button class="btn btn-primary" id="backToMenuBtn">BACK TO MENU</button>
        </div>
    </div>

    <!-- Garage/Shop Screen -->
    <div id="garageScreen" class="screen hidden">
        <div class="menu-content">
            <h2>GARAGE</h2>
            <div class="money-display">
                <span>üí∞ Available Money: <strong id="garageMoney">0</strong></span>
            </div>
            <div id="vehicleList" class="vehicle-list">
                <!-- Vehicles will be populated by JavaScript -->
            </div>
            <button class="btn btn-primary" id="backToMenuFromGarageBtn">BACK TO MENU</button>
        </div>
    </div>

    <!-- Game HUD (visible during gameplay) -->
    <div id="gameHUD" class="hud hidden">
        <div class="hud-top">
            <div class="hud-item">
                <span class="hud-label">Distance:</span>
                <span class="hud-value" id="distanceValue">0 m</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Time:</span>
                <span class="hud-value" id="timeValue">0:00</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Money:</span>
                <span class="hud-value" id="moneyValue">üí∞ 0</span>
            </div>
            <div class="hud-item">
                <span class="hud-label">Speed:</span>
                <span class="hud-value" id="speedValue">0 km/h</span>
            </div>
        </div>
        <div class="hud-bottom">
            <div class="police-alert" id="policeAlert">
                üö® POLICE NEARBY üö®
            </div>
        </div>
    </div>

    <!-- Mobile Controls -->
    <div id="mobileControls" class="mobile-controls hidden">
        <div class="control-group control-left">
            <button class="control-btn" id="leftBtn">‚Üê</button>
            <button class="control-btn" id="rightBtn">‚Üí</button>
        </div>
        <div class="control-group control-right">
            <button class="control-btn" id="accelerateBtn">‚Üë</button>
            <button class="control-btn" id="brakeBtn">‚Üì</button>
        </div>
        <button class="control-btn control-drift" id="driftBtn">DRIFT</button>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen hidden">
        <div class="menu-content">
            <h2 class="game-over-title">BUSTED!</h2>
            <div class="game-over-stats">
                <div class="stat-item">
                    <span class="stat-label">üìè Distance Traveled:</span>
                    <span class="stat-value" id="finalDistance">0 m</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">‚è±Ô∏è Time Survived:</span>
                    <span class="stat-value" id="finalTime">0:00</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">üí∞ Money Collected:</span>
                    <span class="stat-value" id="finalMoney">0</span>
                </div>
                <div class="stat-item highlight">
                    <span class="stat-label">üíµ Total Money:</span>
                    <span class="stat-value" id="finalTotalMoney">0</span>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="btn btn-primary" id="playAgainBtn">PLAY AGAIN</button>
                <button class="btn btn-secondary" id="toGarageBtn">GO TO GARAGE</button>
                <button class="btn btn-secondary" id="toMenuBtn">MAIN MENU</button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="screen">
        <div class="loading-content">
            <h2>LOADING...</h2>
            <div class="loading-bar">
                <div class="loading-progress" id="loadingProgress"></div>
            </div>
        </div>
    </div>

    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Game Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/vehicle.js"></script>
    <script src="js/police.js"></script>
    <script src="js/environment.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/shop.js"></script>
    <script src="js/game.js"></script>
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escape Road - Web</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- UI Layers -->
  <div id="ui-root">
    <div id="main-menu" class="panel visible">
      <h1>Escape Road</h1>
      <button id="btn-play">Start Run</button>
      <button id="btn-garage">Garage / Shop</button>
    </div>

    <div id="hud" class="panel hidden">
      <div class="hud-item">Distance: <span id="hud-distance">0</span> m</div>
      <div class="hud-item">Run $: <span id="hud-money">0</span></div>
      <div class="hud-item">Total $: <span id="hud-total-money">0</span></div>
      <div id="touch-controls" class="hidden">
        <button id="btn-left" class="touch">‚üµ</button>
        <button id="btn-accel" class="touch">‚ñ≤</button>
        <button id="btn-right" class="touch">‚ü∂</button>
        <button id="btn-brake" class="touch">‚ñº</button>
      </div>
    </div>

    <div id="game-over" class="panel hidden">
      <h2>Game Over</h2>
      <div>Distance: <span id="over-distance">0</span> m</div>
      <div>Collected: $<span id="over-money">0</span></div>
      <div>Total $: <span id="over-total-money">0</span></div>
      <div class="actions">
        <button id="btn-restart">Restart</button>
        <button id="btn-to-garage">Garage / Shop</button>
      </div>
    </div>

    <div id="garage" class="panel hidden">
      <h2>Garage / Shop</h2>
      <div id="vehicle-list"></div>
      <div class="actions">
        <button id="btn-back-menu">Back to Menu</button>
        <button id="btn-start-from-garage">Start Run</button>
      </div>
    </div>
  </div>

  <!-- Canvas -->
  <canvas id="game-canvas"></canvas>

  <script type="module" src="./src/game/main.js"></script>
</body>
</html>
